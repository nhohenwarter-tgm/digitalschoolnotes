%\section*{Javascript Optimierung}
\cfoot{Niklas Hohenwarter}

Im Laufe des Projektes gab es immer mehr Probleme im Zusammenhang mit Javascript. Einfache Befehle wie \textit{console.log()} funktionierten nicht mehr ordnungsgemäß. Das Problem konnte bis zum Ende des Projektes nicht behoben werden jedoch soll dieses Kapitel für zukünftige Projekte hilfreich sein.

\subsubsection{Code Style}
In Javascript gibt es meist viele Möglichkeiten den selben Code zu schreiben. Dadurch ist es schwierig sich in neue Frameworks oder anderes einzuarbeiten. Wenn ein bestimmtes Problem auftritt und eine Lösung im Internet gesucht wird, dann kann ein Anfänger nicht Unterscheiden ob diese Lösung nun nur eine andere Schreibweise einer anderen Lösung ist oder ein komplett anderer Ansatz. 

Es hat natürlich auch Vorteile eine Sprache so schwach reguliert zu gestalten. Jeder Programmierer kann sich einen Stil aussuchen der ihm gefällt und mit welchem er gut arbeiten kann. Des Weiteren sind unterschiedliche Schreibweisen des Codes auch unterschiedlich effektiv. 

Doch ist soetwas wirklich nötig? Es gibt genug Sprachen in welchen ganz genau festgelegt ist wie etwas durchzuführen ist. Javascript gehört hier leider nicht dazu. Es würde auf jeden Fall das Verständniss der Sprache vereinfachen. 

\begin{lstlisting}[caption = Unterschiedliche Möglichkeiten eine Funktion zu deklarieren\cite{JSOP1}, label = jsopfn]
function A(){};             // function declaration
var B = function(){};       // function expression
var C = (function(){});     // function expression with grouping operators
var D = function foo(){};   // named function expression
// immediately-invoked function expression (IIFE) that returns a function
var E = (function(){ 
  return function(){}
})();
var F = new Function();     // Function constructor
var G = new function(){};   // special case: object constructor

\end{lstlisting}

Doch wie kann dieses Problem nun umgangen werden? Am besten ist es, sich am Anfang eines Projektes auf eine Schreibweise für z.B. Funktionsdeklarationen zu einigen. Dies macht zumindest den Code im eigenen Projekt um einiges vergleichbarer. Wenn sich das Team einen gemeinsamen Code Style aneignet, dann kann der bereits verfasste Code besser wiederverwendet und verstanden werden.

\newpage

\subsubsection{Debugging}
Der Javascript Code im Projekt wurde großteils mit \textit{console.log()} und \textit{alert()} debuggt. Da diese beiden Befehle nach einer gewissen Zeit nicht mehr zuverlässig funktionierten, wurde es um einiges schwieriger Fehler aufzuspüren. Der Befehl wurde manchmal richtig ausgeführt, manchmal nicht an der Stelle an welcher sie geschrieben wurden und manchmal wurden sie garnicht beachtet. 

Hier sollten die Debugger in den Browsern weiterhelfen. Jeder moderne Browser wie z.B. Firefox oder Chrome hat einen solchen eingebaut. Mit diesem lassen sich wie in jedem anderen Debugger Breakpoints setzen. In folge dessen kann das Programm dann Schritt für Schritt durchgesteppt werden. Desweiteren kann auch der Inhalt der Variablen eingesehen werden. 

Ein Firefox Plugin namens Firebug unterstützt diese Variablenüberprüfung und einige andere Features welche es in normalen Browser Debuggern nicht gibt und sollte daher unbedingt in zukünftigen Projekten verwendet werden. Hiermit hätte während des Projektes nach einer gewissen Einarbeitungsphase einiges an Zeit gespart werden können. 

\insertpicture{images/design/firebug.png}{Firebug Javascript Debugger}{\cite{FIREBUG}}{itm:firebug-screenshot}{0.95}

Die Fehlfunktion von \textit{console.log()} und \textit{alert()} erklärte sich das Team durch die vielen eingebundenen Libraries. Eine dieser Libraries könnte diese Funktion vielleicht überschrieben haben.

\newpage

\subsubsection{Scripteinbindung}
Je weniger Scripts eingebunden werden müssen desto besser. Müssen jedoch wie in diesem Projekt relativ viele Javascripts Frameworks und Scripts eingebunden werden, dann sollten die Imports organisiert werden und ein paar Regeln folgen.

Falls möglich sollten die Scripts über ein CDN eingebunden werden um die Performance zu erhöhen. Desweiteren wird damit auch Bandbreite und Traffic gespart. 

Alle Scripts sollten mit der gleichen Schreibweise des Script Tags eingebunden werden um die Imports übersichtlich zu halten. 

Falls ein Framework aus vielen Javascript Files besteht dann sollten diese falls möglich in weniger Files zusammengefasst werden. Dadurch werden die Imports übersichtlicher und die Scripts können schneller geladen werden.

\subsubsection{Optimierung}
Um die Ladezeit der Scripts zu optimieren sollten diese komprimiert werden. Die geschieht indem alle Leerzeichen, Absätze und Kommentare entfernt werden. Dadurch kann erheblich die Dateigröße reduziert und somit die Übertragungszeit minimiert werden. 

Scripts welche nicht sofort benötigt werden sollten nachgeladen werden. Dies kann mit den \textit{async} und \textit{defer} Statements bei der Scripteinbindung erreicht werden. Doch Achtung: nicht bei allen Scripts funktioniert das. Wenn die falschen Scripts nachgeladen werden, dann funktioniert die ganze Seite nicht mehr.